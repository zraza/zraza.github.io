{"version":3,"sources":["scripts/app.js"],"names":["angular","module","timeSelectorWidget","link","scope","total","vm","directive","bindToController","replace","controller","Controller","templateUrl","controllerAs","restrict","selected","activate","initData","options","D","1M","1Y","this","stockWidgetHolder","stockSymbols","stockHighAndLowWidget","marketCode","timeCode","$scope","StockService","_","loadData","initWatches","loading","getData","then","res","data","history","length","StockRange","min","minBy","low","max","maxBy","high","error","$watch","newVal","$inject","$http","GLOBALS","stockCode","get","API_BASE","service","MainController","runBlock","$log","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","url","otherwise","config","constant","moment","$logProvider","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-eb8a87be16.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('directives', ['services']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('directives')\n    .directive('timeSelectorWidget', timeSelectorWidget);\n\n\n  /* @ngInject */\n  function timeSelectorWidget() {\n    var total = 0;\n    // Usage:\n    //\n    // Creates:\n    //\n    var directive = {\n      bindToController: true,\n      replace: true,\n      controller: Controller,\n      templateUrl: 'app/directives/time-selector/time-selector-widget.html',\n      controllerAs: 'vm',\n      link: link,\n      restrict: 'E',\n      scope: {\n        selected: '='\n      }\n    };\n    return directive;\n\n    function link(scope) {\n      total++;\n      scope.vm.total = total;\n    }\n  }\n\n  /* @ngInject */\n  function Controller() {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      initData();\n    }\n\n    function initData() {\n      vm.options = {\n        'D': 'Day',\n        '1M': 'Month',\n        '1Y': 'Year'\n      }\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('directives')\n    .directive('stockWidgetHolder', stockWidgetHolder);\n\n\n  /* @ngInject */\n  function stockWidgetHolder() {\n    // Usage:\n    //\n    // Creates:\n    //\n    var directive = {\n      bindToController: true,\n      replace: true,\n      controller: Controller,\n      templateUrl: 'app/directives/stock-widget-holder/stock-widget-holder.html',\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {}\n    };\n    return directive;\n\n  }\n\n  /* @ngInject */\n  function Controller() {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      initData();\n    }\n\n    function initData() {\n\n      vm.stockSymbols = ['LSE:IBST', '@GB:ASX', 'LSE:RTN', 'LSE:PLP', 'LSE:PAGE', 'LSE:FORT', 'LSE:ENQ', 'LSE:GMS', 'LSE:OXB'];\n\n    }\n\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('directives')\n    .directive('stockHighAndLowWidget', stockHighAndLowWidget);\n\n\n  /* @ngInject */\n  function stockHighAndLowWidget() {\n    // Usage:\n    //\n    // Creates:\n    //\n    var directive = {\n      bindToController: true,\n      replace: true,\n      controller: Controller,\n      templateUrl: 'app/directives/stock-high-low/stock-high-and-low-widget.html',\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        marketCode: '=',\n        timeCode: '=?'\n      }\n    };\n    return directive;\n  }\n\n  /* @ngInject */\n  function Controller($scope, StockService, _) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      initData();\n      loadData();\n      initWatches();\n    }\n\n    function initData() {\n      vm.loading = false;\n      if (!vm.timeCode) {\n        vm.timeCode = 'D';\n      }\n    }\n\n    function loadData() {\n      vm.loading = true;\n      StockService.getData(vm.marketCode, vm.timeCode).then(function(res) {\n        if (res.data && res.data.history && res.data.history.length > 0) {\n          vm.StockRange = {\n            min: _.minBy(res.data.history, 'low').low,\n            max: _.maxBy(res.data.history, 'high').high\n          }\n        } else {\n          vm.error = 'no data available, incomplete data';\n        }\n      }).catch(function() {\n        vm.error = 'error, loading data';\n      }).finally(function() {\n        vm.loading = false;\n      });\n    }\n\n    function initWatches() {\n      $scope.$watch('vm.timeCode', function(newVal) {\n        if (newVal) {\n          loadData();\n        }\n      });\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('services', []);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('services')\n    .service('StockService', StockService);\n\n  /* @ngInject */\n  function StockService($http, GLOBALS) {\n    this.getData = getData;\n\n    ////////////////\n\n    function getData(stockCode, timeCode) {\n\n      return $http.get(GLOBALS.API_BASE + stockCode + '/' + timeCode);\n\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive', ['restangular','ui.router','directives']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController() {\n    \n   \n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'vm'\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global moment:false _:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .constant('moment', moment)\n    .constant('_', _)\n    .constant('GLOBALS', {\n      API_BASE: 'http://interactiveinvestor.netne.net/'\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n  }\n\n})();\n\nangular.module(\"interactive\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<stock-widget-holder></stock-widget-holder>\");\n$templateCache.put(\"app/directives/stock-high-low/stock-high-and-low-widget.html\",\"<section class=stock-high-and-low-widget><h1>Restaurant Group (The) Share Price - {{vm.marketCode}}</h1><p ng-if=vm.error class=error>{{vm.error}}</p><p ng-if=!vm.error>Day High {{vm.StockRange.max | currency:\\\"£\\\":2}}</p><p ng-if=!vm.error>Day Low {{vm.StockRange.min | currency:\\\"£\\\":2}}</p><time-selector-widget ng-if=!vm.loading selected></time-selector-widget><p ng-if=vm.loading>loading...</p></section>\");\n$templateCache.put(\"app/directives/stock-widget-holder/stock-widget-holder.html\",\"<section class=stock-widget-holder><h3>widget name</h3><div class=stock-high-and-low-widget-header><h1>share price</h1><p>hight</p><p>low</p><p>time period</p></div><stock-high-and-low-widget ng-repeat=\\\"stockSymbol in vm.stockSymbols\\\" market-code=stockSymbol></stock-high-and-low-widget></section>\");\n$templateCache.put(\"app/directives/time-selector/time-selector-widget.html\",\"<div><label for=stock-widget-{{vm.total}}>Period:</label><select ng-model=vm.selected ng-options=\\\"key as value for (key , value) in vm.options\\\"></select></div>\");}]);"],"sourceRoot":"/source/"}