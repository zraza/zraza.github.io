{"version":3,"sources":["scripts/app.js"],"names":["angular","module","timeSelectorWidget","link","scope","total","vm","directive","bindToController","replace","controller","Controller","templateUrl","controllerAs","restrict","selected","PeriodOptionsService","activate","initData","options","getAll","this","$inject","stockWidgetHolder","stockSymbols","stockPeriod","stockPeriodFilter","period","periodOptions","filter","stockHighAndLowWidget","marketCode","timeCode","$scope","StockService","_","loadData","initWatches","loading","getData","then","res","data","history","length","StockRange","min","minBy","low","max","maxBy","high","error","$watch","newVal","$http","GLOBALS","stockCode","get","API_BASE","service","D","1M","1Y","MainController","runBlock","$log","debug","run","routerConfig","$stateProvider","$urlRouterProvider","state","url","otherwise","config","constant","moment","$logProvider","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-c64430f1f4.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('directives', ['services']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('directives')\n    .directive('timeSelectorWidget', timeSelectorWidget);\n\n\n  /* @ngInject */\n  function timeSelectorWidget() {\n    var total = 0;\n    // Usage:\n    //\n    // Creates:\n    //\n    var directive = {\n      bindToController: true,\n      replace: true,\n      controller: Controller,\n      templateUrl: 'app/directives/time-selector/time-selector-widget.html',\n      controllerAs: 'vm',\n      link: link,\n      restrict: 'E',\n      scope: {\n        selected: '='\n      }\n    };\n    return directive;\n\n    function link(scope) {\n      total++;\n      scope.vm.total = total;\n    }\n  }\n\n  /* @ngInject */\n  function Controller(PeriodOptionsService) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      initData();\n    }\n\n    function initData() {\n      vm.options = PeriodOptionsService.getAll();\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('directives')\n    .directive('stockWidgetHolder', stockWidgetHolder);\n\n\n  /* @ngInject */\n  function stockWidgetHolder() {\n    // Usage:\n    //\n    // Creates:\n    //\n    var directive = {\n      bindToController: true,\n      replace: true,\n      controller: Controller,\n      templateUrl: 'app/directives/stock-widget-holder/stock-widget-holder.html',\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {}\n    };\n    return directive;\n\n  }\n\n  /* @ngInject */\n  function Controller() {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      initData();\n    }\n\n    function initData() {\n      vm.stockSymbols = ['LSE:IBST', '@GB:ASX', 'LSE:RTN', 'LSE:PLP', 'LSE:PAGE', 'LSE:FORT', 'LSE:ENQ', 'LSE:GMS', 'LSE:OXB'];\n    }\n  }\n})();\n\n(function() {\n    'use strict';\n\n    angular\n        .module('directives')\n        .filter('stockPeriod', stockPeriod);\n\n    function stockPeriod(PeriodOptionsService) {\n        var periodOptions = PeriodOptionsService.getAll();\n\n        return stockPeriodFilter;\n\n        ////////////////\n\n        function stockPeriodFilter(period) {\n            \n            if(periodOptions[period]){\n                return periodOptions[period];\n            }else{\n                return 'Unknown';\n            }\n\n        }\n    }\n\n})();\n(function() {\n  'use strict';\n\n  angular\n    .module('directives')\n    .directive('stockHighAndLowWidget', stockHighAndLowWidget);\n\n\n  /* @ngInject */\n  function stockHighAndLowWidget() {\n    // Usage:\n    //\n    // Creates:\n    //\n    var directive = {\n      bindToController: true,\n      replace: true,\n      controller: Controller,\n      templateUrl: 'app/directives/stock-high-low/stock-high-and-low-widget.html',\n      controllerAs: 'vm',\n      restrict: 'E',\n      scope: {\n        marketCode: '=',\n        timeCode: '=?'\n      }\n    };\n    return directive;\n  }\n\n  /* @ngInject */\n  function Controller($scope, StockService, _) {\n    var vm = this;\n\n    activate();\n\n    function activate() {\n      initData();\n      loadData();\n      initWatches();\n    }\n\n    function initData() {\n      vm.loading = false;\n      if (!vm.timeCode) {\n        vm.timeCode = 'D';\n      }\n    }\n\n    function loadData() {\n      vm.loading = true;\n      StockService.getData(vm.marketCode, vm.timeCode).then(function(res) {\n        if (res.data && res.data.history && res.data.history.length > 0) {\n          vm.StockRange = {\n            min: _.minBy(res.data.history, 'low').low,\n            max: _.maxBy(res.data.history, 'high').high\n          }\n        } else {\n          vm.error = 'no data available, incomplete data';\n        }\n      }).catch(function() {\n        vm.error = 'error, loading data';\n      }).finally(function() {\n        vm.loading = false;\n      });\n    }\n\n    function initWatches() {\n      $scope.$watch('vm.timeCode', function(newVal) {\n        if (newVal) {\n          loadData();\n        }\n      });\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('services', []);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('services')\n    .service('StockService', StockService);\n\n  /* @ngInject */\n  function StockService($http, GLOBALS) {\n    this.getData = getData;\n\n    ////////////////\n\n    function getData(stockCode, timeCode) {\n\n      return $http.get(GLOBALS.API_BASE + stockCode + '/' + timeCode);\n\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('services')\n    .service('PeriodOptionsService', PeriodOptionsService);\n\n  /* @ngInject */\n  function PeriodOptionsService() {\n    this.getAll = getAll;\n\n    ////////////////\n\n    function getAll() {\n\n      return {\n        'D': 'Day',\n        '1M': 'Month',\n        '1Y': 'Year'\n      }\n\n    }\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive', ['restangular','ui.router','directives']);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController() {\n    \n   \n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig($stateProvider, $urlRouterProvider) {\n    $stateProvider\n      .state('home', {\n        url: '/',\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'vm'\n      });\n\n    $urlRouterProvider.otherwise('/');\n  }\n\n})();\n\n/* global moment:false _:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .constant('moment', moment)\n    .constant('_', _)\n    .constant('GLOBALS', {\n      API_BASE: 'http://interactiveinvestor.netne.net/'\n    });\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('interactive')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n  }\n\n})();\n\nangular.module(\"interactive\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<stock-widget-holder></stock-widget-holder>\");\n$templateCache.put(\"app/directives/stock-high-low/stock-high-and-low-widget.html\",\"<section class=stock-high-and-low-widget><h1>Restaurant Group (The) Share Price - {{vm.marketCode}}</h1><p ng-if=vm.error class=error>{{vm.error}}</p><p ng-if=!vm.error>{{vm.timeCode|stockPeriod}} High {{vm.StockRange.max | currency:\\\"£\\\":2}}</p><p ng-if=!vm.error>{{vm.timeCode|stockPeriod}} Low {{vm.StockRange.min | currency:\\\"£\\\":2}}</p><time-selector-widget ng-if=!vm.loading selected></time-selector-widget><p ng-if=vm.loading>loading...</p></section>\");\n$templateCache.put(\"app/directives/stock-widget-holder/stock-widget-holder.html\",\"<section class=stock-widget-holder><h3>widget name</h3><div class=stock-high-and-low-widget-header><h1>share price</h1><p>hight</p><p>low</p><p>time period</p></div><stock-high-and-low-widget ng-repeat=\\\"stockSymbol in vm.stockSymbols\\\" market-code=stockSymbol></stock-high-and-low-widget></section>\");\n$templateCache.put(\"app/directives/time-selector/time-selector-widget.html\",\"<div><label for=stock-widget-{{vm.total}}>Period:</label><select ng-model=vm.selected ng-options=\\\"key as value for (key , value) in vm.options\\\"></select></div>\");}]);"],"sourceRoot":"/source/"}