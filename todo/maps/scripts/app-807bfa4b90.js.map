{"version":3,"sources":["scripts/app.js"],"names":["window","init","templateObj","template","Dom","DOM","$todoAdd","element","$todoNew","$todoList","$todoItemCounter","$todoDelete","render","parameter","innerHTML","renderList","renderCounter","length","_itemId","li","parentElement","parseInt","dataset","id","bind","event","handler","$on","value","$delegate","this","keyCode","ENTER_KEY","View","App","todosArr","todos","add","todo","push","onListChange","remove","filter","PubSub","publish","TodoList","data","view","ctr","defaultTemplate","replace","title","plural","Template","subscribe","subscriberName","fn","subscribers","unSubscribe","i","splice","forEach","selector","scope","document","querySelector","elementAll","querySelectorAll","tagName","parentNode","toLowerCase","target","type","dispatchEvent","targetElement","potentialElements","hasMatch","Array","prototype","indexOf","call","callback","useCapture","addEventListener","modelObj","viewObj","model","onAddNew","onDelete","trim","items","Controller"],"mappings":"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","file":"scripts/app-807bfa4b90.js","sourcesContent":["/*global DOM */\n\n(function(window) {\n  'use strict';\n\n  /*\n   * Abstracts away the browser's DOM completely, this could be IOS native view\n   */\n\n  var ENTER_KEY = 13;\n\n  var template, Dom, $todoAdd,\n    $todoNew,\n    $todoList,\n    $todoItemCounter,\n    $todoDelete;\n\n\n  function init(templateObj) {\n\n    template = templateObj;\n    Dom = window.DOM;\n\n    $todoAdd = Dom.element('.todo-add');\n    $todoNew = Dom.element('.todo-new');\n    $todoList = Dom.element('.todo-list');\n    $todoItemCounter = Dom.element('.todo-count');\n    $todoDelete = '.todo-delete';\n  }\n\n  /**\n   * Render the template blocks\n   */\n\n  function render(parameter) {\n\n    $todoList.innerHTML = template.renderList(parameter);\n    $todoItemCounter.innerHTML = template.renderCounter(parameter.length);\n  }\n  /*\n   * Get the element if from dataset\n   */\n\n  function _itemId(element) {\n    var li = Dom.parentElement(element, 'li');\n    return parseInt(li.dataset.id, 10);\n  }\n\n  /**\n   * Bind DOM events\n   */\n\n  function bind(event, handler) {\n\n    if (event === 'todoAdd') {\n      DOM.$on($todoAdd, 'click', function() {\n        handler($todoNew.value);\n        $todoNew.value = '';\n      });\n    }\n\n    if (event === 'todoDelete') {\n      DOM.$delegate($todoList, $todoDelete, 'click', function() {\n        handler(_itemId(this));\n      });\n    }\n\n    if (event === 'todoNew') {\n      DOM.$on($todoNew, 'keypress', function(event) {\n        if (event.keyCode === ENTER_KEY) {\n          handler(this.value);\n          this.value = '';\n        }\n      });\n    }\n  }\n  /**\n   * Export the public methods\n   */\n  var View = {\n    init: init,\n    bind: bind,\n    render: render\n  }\n\n  window.App = window.App || {};\n  window.App.View = View;\n}(window));\n\n/*global PubSub */\n\n(function(window) {\n  'use strict';\n\n  /**\n   * Todo List object, this publish and changes to the object \n   */\n\n\n  var todos = [];\n\n  function init(todosArr) {\n    todos = todosArr || [];\n  }\n\n  function add(todo) {\n    todo.id = todos.length;\n    todos.push(todo);\n    onListChange();\n  }\n\n  function remove(id) {\n    todos = todos.filter(function(todo) {\n      return todo.id !== id;\n    })\n    onListChange();\n  }\n\n  function onListChange() {\n    PubSub.publish('TodoListChanged', todos);\n  }\n\n  var TodoList = {\n    init: init,\n    add: add,\n    remove: remove\n  };\n\n  window.TodoList = TodoList;\n\n})(window);\n\n(function(window) {\n  'use strict';\n\n  /**\n   * Todo view template and method to render each block of template\n   */\n\n\n  var defaultTemplate = '<li class=\"todo-list-item\" data-id=\"{{id}}\">' \n      + '<div class=\"view todo-list-item-detail\">' \n      + '<label class=\"todo-list-item-label\">{{title}}</label>' \n      + '<button class=\"todo-list-item-delete todo-delete\">Delete</button>' \n      + '</div>' \n      + '</li>';\n\n  /**\n   * Render the TODO list using default template\n   */\n\n  function renderList(data) {\n    var view = '';\n\n    for (var ctr = 0; ctr < data.length; ctr++) {\n      var template = defaultTemplate;\n\n      template = template.replace('{{id}}', data[ctr].id);\n      template = template.replace('{{title}}', data[ctr].title);\n\n      view = view + template;\n    }\n\n    return view;\n  }\n\n  /**\n   * Render the TODO counter\n   */\n\n  function renderCounter(todos) {\n    var plural = todos > 1 ? 's' : '';\n    return '<strong>' + todos + '</strong> item' + plural + ' in list';\n  }\n\n  /**\n   * Export the public methods\n   */\n\n  var Template = {\n    renderList: renderList,\n    renderCounter: renderCounter\n  }\n\n  window.App = window.App || {};\n  window.App.Template = Template;\n})(window);\n\n(function(window) {\n  'use strict';\n\n  /*\n   * Implementation of simple Observer pattern\n   */\n\n  var subscribers = {};\n\n  function subscribe(subscriberName, fn) {\n    subscribers[subscriberName] = subscribers[subscriberName] || [];\n    subscribers[subscriberName].push(fn);\n  }\n\n  function unSubscribe(subscriberName, fn) {\n    if (subscribers[subscriberName]) {\n      for (var i = 0; i < subscribers[subscriberName].length; i++) {\n        if (subscribers[subscriberName][i] === fn) {\n          subscribers[subscriberName].splice(i, 1);\n          break;\n        }\n      }\n    }\n  }\n\n  function publish(subscriberName, data) {\n    if (subscribers[subscriberName]) {\n      subscribers[subscriberName].forEach(function(fn) {\n        fn(data);\n      });\n    }\n  }\n\n  /**\n   * Export the public methods\n   */\n\n  var PubSub = {\n    subscribe: subscribe,\n    unSubscribe: unSubscribe,\n    publish: publish\n  };\n\n\n  window.PubSub = PubSub;\n\n})(window);\n\n/**\n * Abstracts away the browser's DOM lookup and events\n */\n\n(function(window) {\n  'use strict';\n\n  function element(selector, scope) {\n    return (scope || document).querySelector(selector);\n  }\n\n  function elementAll(selector, scope) {\n    return (scope || document).querySelectorAll(selector);\n  }\n\n  function parentElement(element, tagName) {\n    if (!element.parentNode) {\n      return;\n    }\n    if (element.parentNode.tagName.toLowerCase() === tagName.toLowerCase()) {\n      return element.parentNode;\n    }\n    return parentElement(element.parentNode, tagName);\n  }\n\n  // now or in the future elements\n  function $delegate(target, selector, type, handler) {\n    function dispatchEvent(event) {\n      var targetElement = event.target;\n      var potentialElements = elementAll(selector, target);\n      var hasMatch = Array.prototype.indexOf.call(potentialElements, targetElement) >= 0;\n\n      if (hasMatch) {\n        handler.call(targetElement, event);\n      }\n    }\n\n    $on(target, type, dispatchEvent, type === 'blur' || type === 'focus');\n  }\n\n  function $on(target, type, callback, useCapture) {\n    target.addEventListener(type, callback, !!useCapture);\n  }\n  /**\n   * Export the public methods\n   */\n  var DOM = {\n    element: element,\n    elementAll: elementAll,\n    parentElement: parentElement,\n    $on: $on,\n    $delegate: $delegate\n  };\n\n  window.DOM = DOM;\n\n})(window);\n\n/*global PubSub */\n\n(function(window) {\n  'use strict';\n\n  /*\n   * Typical controller, wiring up things\n   */\n\n  var model, view;\n\n  function init(modelObj, viewObj) {\n    model = modelObj;\n    view = viewObj;\n\n    view.bind('todoNew', onAddNew);\n    view.bind('todoAdd', onAddNew);\n    view.bind('todoDelete', onDelete);\n\n    PubSub.subscribe('TodoListChanged', onListChange);\n  }\n\n  function onAddNew(title) {\n    if (title.trim() === '') {\n      return;\n    }\n\n    model.add({ title: title });\n  }\n\n  function onDelete(id) {\n    model.remove(id);\n  }\n\n  function onListChange(items) {\n    view.render(items);\n  }\n\n  var Controller = {\n    init: init\n  }\n\n\n  window.App = window.App || {};\n  window.App.Controller = Controller;\n})(window);\n\n/*global TodoList */\n\n(function(window) {\n  'use strict';\n  /*\n   * Starting everything\n   */\n\n  var App = window.App || {};\n\n  function init() {\n    App.View.init(App.Template);\n    TodoList.init();\n    App.Controller.init(TodoList, App.View);\n  }\n\n  App.init = init;\n\n  window.App = App;\n})(window);\n"],"sourceRoot":"/source/"}